<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monero: src/cryptonote_protocol/block_queue.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Monero
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_1a5f3ec794f1a8d3570327f40e4bd693.html">cryptonote_protocol</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">block_queue.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/dc4/block__queue_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2017-2022, The Monero Project</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// All rights reserved.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Redistribution and use in source and binary forms, with or without modification, are</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// permitted provided that the following conditions are met:</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// 1. Redistributions of source code must retain the above copyright notice, this list of</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//    conditions and the following disclaimer.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// 2. Redistributions in binary form must reproduce the above copyright notice, this list</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//    of conditions and the following disclaimer in the documentation and/or other</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//    materials provided with the distribution.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// 3. Neither the name of the copyright holder nor the names of its contributors may be</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//    used to endorse or promote products derived from this software without specific</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//    prior written permission.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// </span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// Parts of this file are originally copyright (c) 2012-2013 The Cryptonote developers</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;boost/thread/recursive_mutex.hpp&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;boost/uuid/uuid.hpp&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/de6/net__utils__base_8h.html">net/net_utils_base.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#undef MONERO_DEFAULT_LOG_CATEGORY</span></div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../df/dc4/block__queue_8h.html#aa46e84cccc1fb1a44f5762295d51e835">   42</a></span>&#160;<span class="preprocessor">#define MONERO_DEFAULT_LOG_CATEGORY &quot;cn.block_queue&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../df/d43/namespacecryptonote.html">cryptonote</a></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">struct </span>block_complete_entry;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html">   48</a></span>&#160;  <span class="keyword">class </span><a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html">block_queue</a></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html">   51</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html">span</a></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    {</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">   53</a></span>&#160;      <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">start_block_height</a>;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">   54</a></span>&#160;      std::vector&lt;crypto::hash&gt; <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">hashes</a>;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a32b7e86462262089ab1e08e87806e45a">   55</a></span>&#160;      std::vector&lt;cryptonote::block_complete_entry&gt; <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a32b7e86462262089ab1e08e87806e45a">blocks</a>;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">   56</a></span>&#160;      <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adc387f3dc2e776164d2d78045181a400">   57</a></span>&#160;      <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adc387f3dc2e776164d2d78045181a400">nblocks</a>;</div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8da75a3ba900d8d58fdfb3eb63cf26c0">   58</a></span>&#160;      <span class="keywordtype">float</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8da75a3ba900d8d58fdfb3eb63cf26c0">rate</a>;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aad85f3a9526892d4bde7f6171647c87a">   59</a></span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aad85f3a9526892d4bde7f6171647c87a">size</a>;</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">   60</a></span>&#160;      boost::posix_time::ptime <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a>;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a71f2ca79d57c1d010c08823706ff5428">   61</a></span>&#160;      <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a71f2ca79d57c1d010c08823706ff5428">origin</a>{};</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8963c71af31387d0e771c3aba25c4c0f">   63</a></span>&#160;      <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8963c71af31387d0e771c3aba25c4c0f">span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> start_block_height, std::vector&lt;cryptonote::block_complete_entry&gt; blocks, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, <span class="keyword">const</span> <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, <span class="keywordtype">float</span> rate, <span class="keywordtype">size_t</span> size):</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        start_block_height(start_block_height), blocks(<a class="code" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#aa1114d84589bd22f45d443527528cb35">move</a>(blocks)), connection_id(connection_id), nblocks(this-&gt;blocks.size()), rate(rate), size(size), time(<a class="code" href="../../d4/da9/namespaceboost.html">boost</a>::date_time::min_date_time), <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a71f2ca79d57c1d010c08823706ff5428">origin</a>(addr) {}</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aedf7480ca7366b86bbd0fa83087815d3">   65</a></span>&#160;      <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aedf7480ca7366b86bbd0fa83087815d3">span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> start_block_height, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> nblocks, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, <span class="keyword">const</span> <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, boost::posix_time::ptime time):</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        start_block_height(start_block_height), connection_id(connection_id), nblocks(nblocks), rate(0.0f), size(0), time(time), <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a71f2ca79d57c1d010c08823706ff5428">origin</a>(addr) {}</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a45b5e428171e8d21a1a0e10ae26b53f3">   68</a></span>&#160;      <span class="keywordtype">bool</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a45b5e428171e8d21a1a0e10ae26b53f3">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html">span</a> &amp;<a class="code" href="../../de/dc6/minissdp_8c.html#ab87f55bd0280d90925050a4188c14ab5">s</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> start_block_height &lt; s.<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">start_block_height</a>; }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    };</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0e16912f54da72d8c75183fda6d83823">   70</a></span>&#160;    <span class="keyword">typedef</span> std::set&lt;span&gt; <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0e16912f54da72d8c75183fda6d83823">block_map</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keyword">public</span>:</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#abc8332359a5a76753d33df4342af54ed">add_blocks</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> height, std::vector&lt;cryptonote::block_complete_entry&gt; bcel, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>, <span class="keyword">const</span> <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, <span class="keywordtype">float</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8da75a3ba900d8d58fdfb3eb63cf26c0">rate</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aad85f3a9526892d4bde7f6171647c87a">size</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#abc8332359a5a76753d33df4342af54ed">add_blocks</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> height, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adc387f3dc2e776164d2d78045181a400">nblocks</a>, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>, <span class="keyword">const</span> <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, boost::posix_time::ptime <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a> = boost::date_time::min_date_time);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#aa91abfd70e7aa8fb0c42f9619d468abf">flush_spans</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>, <span class="keywordtype">bool</span> <a class="code" href="../../df/d43/namespacecryptonote.html#a5427758fe058f0d303d70177f969cb0daa181a603769c1f98ad927e7367c7aa51">all</a> = <span class="keyword">false</span>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a288aac5481d7b519bb9db5fdc9d33ceb">flush_stale_spans</a>(<span class="keyword">const</span> std::set&lt;boost::uuids::uuid&gt; &amp;live_connections);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a813d35950275d9f807185dd0ed5677f7">remove_span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">start_block_height</a>, std::vector&lt;crypto::hash&gt; *<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">hashes</a> = NULL);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a12e1d84f6ed1ef268c2f1588dd81a32e">remove_spans</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">start_block_height</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae5605cff9cc355ceec6950529dad7295">get_max_block_height</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a61052948e2b97f3380fb80759d28445d">print</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../d0/da7/namespacetesting_1_1internal.html#a5ca8a348395a6145775c1a2334e21889">std::string</a> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#acd13bf3ddfe4bdd8be06e9aa192fb7c4">get_overview</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> blockchain_height) <span class="keyword">const</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ad059f807bbbcc23d2de8e73090272efe">has_unpruned_height</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> block_height, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> blockchain_height, <a class="code" href="../../df/dd8/stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pruning_seed) <span class="keyword">const</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    std::pair&lt;uint64_t, uint64_t&gt; <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ab69862fe5805316070a5f15caacbfe5d">reserve_span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> first_block_height, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> last_block_height, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> max_blocks, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">connection_id</a>, <span class="keyword">const</span> <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, <span class="keywordtype">bool</span> sync_pruned_blocks, <a class="code" href="../../df/dd8/stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> local_pruning_seed, <a class="code" href="../../df/dd8/stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> pruning_seed, <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> blockchain_height, <span class="keyword">const</span> std::vector&lt;std::pair&lt;crypto::hash, uint64_t&gt;&gt; &amp;block_hashes, boost::posix_time::ptime <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a> = boost::posix_time::microsec_clock::universal_time());</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae4a10533476e14d5676df9f336b697d6">get_next_needed_height</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> blockchain_height) <span class="keyword">const</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    std::pair&lt;uint64_t, uint64_t&gt; <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#adde73fce6dfd33aaaf3228d3c3a43ec5">get_next_span_if_scheduled</a>(std::vector&lt;crypto::hash&gt; &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">hashes</a>, <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, boost::posix_time::ptime &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae993720def7d2e6e769416c3a15d78d3">reset_next_span_time</a>(boost::posix_time::ptime <a class="code" href="../../dc/daa/namespaceconsole.html#a22ca04bedd29404c3a93de46a11c1deb">t</a> = boost::posix_time::microsec_clock::universal_time());</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a78b7b9ea0f6494a4799d3e73ed5ff66b">set_span_hashes</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> start_height, <span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, std::vector&lt;crypto::hash&gt; <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">hashes</a>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a6661f09dc74635ca90ad7ad7257159a4">get_next_span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> &amp;height, std::vector&lt;cryptonote::block_complete_entry&gt; &amp;bcel, <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, <a class="code" href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a> &amp;addr, <span class="keywordtype">bool</span> filled = <span class="keyword">true</span>) <span class="keyword">const</span>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ac6e92aedb9bf2acf679a98b1d0650956">has_next_span</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id, <span class="keywordtype">bool</span> &amp;filled, boost::posix_time::ptime &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ac6e92aedb9bf2acf679a98b1d0650956">has_next_span</a>(<a class="code" href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a> height, <span class="keywordtype">bool</span> &amp;filled, boost::posix_time::ptime &amp;<a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">time</a>, <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id) <span class="keyword">const</span>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae84264faa4cc13858e2ab40e8b378f92">get_data_size</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#aca1cc54f3f279942d33ccdece614a12b">get_num_filled_spans_prefix</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a7c8ff278e9369288942b7af3b82cb986">get_num_filled_spans</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">crypto::hash</a> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a9e0f22eba6321d273b52a4c06030e91d">get_last_known_hash</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id) <span class="keyword">const</span>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#abf4cc71f9dee21814b8bbbc7b636c9d4">has_spans</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id) <span class="keyword">const</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a78797fe39d271047381b0fbf4aa5622e">get_speed</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id) <span class="keyword">const</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a01a214bfec8271c6a4bd4609d8b32854">get_download_rate</a>(<span class="keyword">const</span> <a class="code" href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">boost::uuids::uuid</a> &amp;connection_id) <span class="keyword">const</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">bool</span> <span class="keywordflow">foreach</span>(std::function&lt;<span class="keywordtype">bool</span>(<span class="keyword">const</span> <a class="code" href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html">span</a>&amp;)&gt; f) <span class="keyword">const</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a2f7c702f852401a01a4bbdfd4969f12c">requested</a>(<span class="keyword">const</span> <a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">crypto::hash</a> &amp;<a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">hash</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#af91f0888b95246d034feb890b751da32">have</a>(<span class="keyword">const</span> <a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">crypto::hash</a> &amp;<a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">hash</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0447eed96065df5c20644ef9b4ef5cdd">erase_block</a>(block_map::iterator j);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#ade80b03acc63f352998e08d118f75cab">requested_internal</a>(<span class="keyword">const</span> <a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">crypto::hash</a> &amp;<a class="code" href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">hash</a>) <span class="keyword">const</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">private</span>:</div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a38c802bb3954698f02506c9c66c37c92">  107</a></span>&#160;    block_map <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a38c802bb3954698f02506c9c66c37c92">blocks</a>;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html#acca7bf29938a11e551361af77e394bf7">  108</a></span>&#160;    <span class="keyword">mutable</span> boost::recursive_mutex <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#acca7bf29938a11e551361af77e394bf7">mutex</a>;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0ca843e8ef206183c3bcac084dd423a0">  109</a></span>&#160;    std::unordered_set&lt;crypto::hash&gt; <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0ca843e8ef206183c3bcac084dd423a0">requested_hashes</a>;</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a4a4f982300318ea7d773ad28528ae9b5">  110</a></span>&#160;    std::unordered_set&lt;crypto::hash&gt; <a class="code" href="../../d0/d7f/classcryptonote_1_1block__queue.html#a4a4f982300318ea7d773ad28528ae9b5">have_blocks</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  };</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_aedf7480ca7366b86bbd0fa83087815d3"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aedf7480ca7366b86bbd0fa83087815d3">cryptonote::block_queue::span::span</a></div><div class="ttdeci">span(uint64_t start_block_height, uint64_t nblocks, const boost::uuids::uuid &amp;connection_id, const epee::net_utils::network_address &amp;addr, boost::posix_time::ptime time)</div><div class="ttdef"><b>Definition:</b> block_queue.h:65</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ae84264faa4cc13858e2ab40e8b378f92"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae84264faa4cc13858e2ab40e8b378f92">cryptonote::block_queue::get_data_size</a></div><div class="ttdeci">size_t get_data_size() const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:408</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html">cryptonote::block_queue</a></div><div class="ttdef"><b>Definition:</b> block_queue.h:48</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ae4a10533476e14d5676df9f336b697d6"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae4a10533476e14d5676df9f336b697d6">cryptonote::block_queue::get_next_needed_height</a></div><div class="ttdeci">uint64_t get_next_needed_height(uint64_t blockchain_height) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:160</div></div>
<div class="ttc" id="namespaceboost_html"><div class="ttname"><a href="../../d4/da9/namespaceboost.html">boost</a></div><div class="ttdef"><b>Definition:</b> portable_binary_archive.hpp:29</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_adc387f3dc2e776164d2d78045181a400"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adc387f3dc2e776164d2d78045181a400">cryptonote::block_queue::span::nblocks</a></div><div class="ttdeci">uint64_t nblocks</div><div class="ttdef"><b>Definition:</b> block_queue.h:57</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_abc8332359a5a76753d33df4342af54ed"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#abc8332359a5a76753d33df4342af54ed">cryptonote::block_queue::add_blocks</a></div><div class="ttdeci">void add_blocks(uint64_t height, std::vector&lt; cryptonote::block_complete_entry &gt; bcel, const boost::uuids::uuid &amp;connection_id, const epee::net_utils::network_address &amp;addr, float rate, size_t size)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:55</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ad059f807bbbcc23d2de8e73090272efe"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ad059f807bbbcc23d2de8e73090272efe">cryptonote::block_queue::has_unpruned_height</a></div><div class="ttdeci">bool has_unpruned_height(uint64_t block_height, uint64_t blockchain_height, uint32_t pruning_seed) const</div></div>
<div class="ttc" id="namespacetesting_1_1internal_html_a5ca8a348395a6145775c1a2334e21889"><div class="ttname"><a href="../../d0/da7/namespacetesting_1_1internal.html#a5ca8a348395a6145775c1a2334e21889">testing::internal::string</a></div><div class="ttdeci">::std::string string</div><div class="ttdef"><b>Definition:</b> gtest-port.h:1097</div></div>
<div class="ttc" id="classepee_1_1net__utils_1_1network__address_html"><div class="ttname"><a href="../../df/d4e/classepee_1_1net__utils_1_1network__address.html">epee::net_utils::network_address</a></div><div class="ttdef"><b>Definition:</b> net_utils_base.h:222</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a7c8ff278e9369288942b7af3b82cb986"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a7c8ff278e9369288942b7af3b82cb986">cryptonote::block_queue::get_num_filled_spans</a></div><div class="ttdeci">size_t get_num_filled_spans() const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:433</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_adea83806fca147009aa0806f2c8bb95f"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#adea83806fca147009aa0806f2c8bb95f">cryptonote::block_queue::span::start_block_height</a></div><div class="ttdeci">uint64_t start_block_height</div><div class="ttdef"><b>Definition:</b> block_queue.h:53</div></div>
<div class="ttc" id="namespaceconsole_html_a22ca04bedd29404c3a93de46a11c1deb"><div class="ttname"><a href="../../dc/daa/namespaceconsole.html#a22ca04bedd29404c3a93de46a11c1deb">console.t</a></div><div class="ttdeci">t</div><div class="ttdef"><b>Definition:</b> console.py:33</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a4a4f982300318ea7d773ad28528ae9b5"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a4a4f982300318ea7d773ad28528ae9b5">cryptonote::block_queue::have_blocks</a></div><div class="ttdeci">std::unordered_set&lt; crypto::hash &gt; have_blocks</div><div class="ttdef"><b>Definition:</b> block_queue.h:110</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_aa91abfd70e7aa8fb0c42f9619d468abf"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#aa91abfd70e7aa8fb0c42f9619d468abf">cryptonote::block_queue::flush_spans</a></div><div class="ttdeci">void flush_spans(const boost::uuids::uuid &amp;connection_id, bool all=false)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:79</div></div>
<div class="ttc" id="minissdp_8c_html_ab87f55bd0280d90925050a4188c14ab5"><div class="ttname"><a href="../../de/dc6/minissdp_8c.html#ab87f55bd0280d90925050a4188c14ab5">s</a></div><div class="ttdeci">const char * s</div><div class="ttdef"><b>Definition:</b> minissdp.c:596</div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> enums.h:67</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_aad85f3a9526892d4bde7f6171647c87a"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#aad85f3a9526892d4bde7f6171647c87a">cryptonote::block_queue::span::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> block_queue.h:59</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a45b5e428171e8d21a1a0e10ae26b53f3"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a45b5e428171e8d21a1a0e10ae26b53f3">cryptonote::block_queue::span::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const span &amp;s) const</div><div class="ttdef"><b>Definition:</b> block_queue.h:68</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html">cryptonote::block_queue::span</a></div><div class="ttdef"><b>Definition:</b> block_queue.h:51</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_aca1cc54f3f279942d33ccdece614a12b"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#aca1cc54f3f279942d33ccdece614a12b">cryptonote::block_queue::get_num_filled_spans_prefix</a></div><div class="ttdeci">size_t get_num_filled_spans_prefix() const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:417</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ae993720def7d2e6e769416c3a15d78d3"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae993720def7d2e6e769416c3a15d78d3">cryptonote::block_queue::reset_next_span_time</a></div><div class="ttdeci">void reset_next_span_time(boost::posix_time::ptime t=boost::posix_time::microsec_clock::universal_time())</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:329</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a0e16912f54da72d8c75183fda6d83823"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0e16912f54da72d8c75183fda6d83823">cryptonote::block_queue::block_map</a></div><div class="ttdeci">std::set&lt; span &gt; block_map</div><div class="ttdef"><b>Definition:</b> block_queue.h:70</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ade80b03acc63f352998e08d118f75cab"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ade80b03acc63f352998e08d118f75cab">cryptonote::block_queue::requested_internal</a></div><div class="ttdeci">bool requested_internal(const crypto::hash &amp;hash) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:214</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a01a214bfec8271c6a4bd4609d8b32854"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a01a214bfec8271c6a4bd4609d8b32854">cryptonote::block_queue::get_download_rate</a></div><div class="ttdeci">float get_download_rate(const boost::uuids::uuid &amp;connection_id) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:508</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a22645d022502ff95add3ccf9073d00c5"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a22645d022502ff95add3ccf9073d00c5">cryptonote::block_queue::span::hashes</a></div><div class="ttdeci">std::vector&lt; crypto::hash &gt; hashes</div><div class="ttdef"><b>Definition:</b> block_queue.h:54</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a12e1d84f6ed1ef268c2f1588dd81a32e"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a12e1d84f6ed1ef268c2f1588dd81a32e">cryptonote::block_queue::remove_spans</a></div><div class="ttdeci">void remove_spans(const boost::uuids::uuid &amp;connection_id, uint64_t start_block_height)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:134</div></div>
<div class="ttc" id="namespacecryptonote_html"><div class="ttname"><a href="../../df/d43/namespacecryptonote.html">cryptonote</a></div><div class="ttdoc">Holds cryptonote related classes and helpers. </div><div class="ttdef"><b>Definition:</b> blockchain_db.cpp:44</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a0ca843e8ef206183c3bcac084dd423a0"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0ca843e8ef206183c3bcac084dd423a0">cryptonote::block_queue::requested_hashes</a></div><div class="ttdeci">std::unordered_set&lt; crypto::hash &gt; requested_hashes</div><div class="ttdef"><b>Definition:</b> block_queue.h:109</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a61052948e2b97f3380fb80759d28445d"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a61052948e2b97f3380fb80759d28445d">cryptonote::block_queue::print</a></div><div class="ttdeci">void print() const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:179</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a288aac5481d7b519bb9db5fdc9d33ceb"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a288aac5481d7b519bb9db5fdc9d33ceb">cryptonote::block_queue::flush_stale_spans</a></div><div class="ttdeci">void flush_stale_spans(const std::set&lt; boost::uuids::uuid &gt; &amp;live_connections)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:104</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_acd13bf3ddfe4bdd8be06e9aa192fb7c4"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#acd13bf3ddfe4bdd8be06e9aa192fb7c4">cryptonote::block_queue::get_overview</a></div><div class="ttdeci">std::string get_overview(uint64_t blockchain_height) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:187</div></div>
<div class="ttc" id="minissdp_8c_html_a0873421d8da2b839db63d6f61cb10d16"><div class="ttname"><a href="../../de/dc6/minissdp_8c.html#a0873421d8da2b839db63d6f61cb10d16">uuid</a></div><div class="ttdeci">const char * uuid</div><div class="ttdef"><b>Definition:</b> minissdp.c:598</div></div>
<div class="ttc" id="stdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../df/dd8/stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> stdint.h:126</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_af91f0888b95246d034feb890b751da32"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#af91f0888b95246d034feb890b751da32">cryptonote::block_queue::have</a></div><div class="ttdeci">bool have(const crypto::hash &amp;hash) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:225</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a5a00687b94dd65a0f2997d5c6e481bb4"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a5a00687b94dd65a0f2997d5c6e481bb4">cryptonote::block_queue::span::time</a></div><div class="ttdeci">boost::posix_time::ptime time</div><div class="ttdef"><b>Definition:</b> block_queue.h:60</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a8da75a3ba900d8d58fdfb3eb63cf26c0"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8da75a3ba900d8d58fdfb3eb63cf26c0">cryptonote::block_queue::span::rate</a></div><div class="ttdeci">float rate</div><div class="ttdef"><b>Definition:</b> block_queue.h:58</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a78797fe39d271047381b0fbf4aa5622e"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a78797fe39d271047381b0fbf4aa5622e">cryptonote::block_queue::get_speed</a></div><div class="ttdeci">float get_speed(const boost::uuids::uuid &amp;connection_id) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:472</div></div>
<div class="ttc" id="stdint_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="../../df/dd8/stdint_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition:</b> stdint.h:136</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_adde73fce6dfd33aaaf3228d3c3a43ec5"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#adde73fce6dfd33aaaf3228d3c3a43ec5">cryptonote::block_queue::get_next_span_if_scheduled</a></div><div class="ttdeci">std::pair&lt; uint64_t, uint64_t &gt; get_next_span_if_scheduled(std::vector&lt; crypto::hash &gt; &amp;hashes, boost::uuids::uuid &amp;connection_id, boost::posix_time::ptime &amp;time) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:313</div></div>
<div class="ttc" id="namespacecryptonote_html_a5427758fe058f0d303d70177f969cb0daa181a603769c1f98ad927e7367c7aa51"><div class="ttname"><a href="../../df/d43/namespacecryptonote.html#a5427758fe058f0d303d70177f969cb0daa181a603769c1f98ad927e7367c7aa51">cryptonote::relay_category::all</a></div><div class="ttdoc">Everything in the db. </div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a813d35950275d9f807185dd0ed5677f7"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a813d35950275d9f807185dd0ed5677f7">cryptonote::block_queue::remove_span</a></div><div class="ttdeci">bool remove_span(uint64_t start_block_height, std::vector&lt; crypto::hash &gt; *hashes=NULL)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:118</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_acca7bf29938a11e551361af77e394bf7"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#acca7bf29938a11e551361af77e394bf7">cryptonote::block_queue::mutex</a></div><div class="ttdeci">boost::recursive_mutex mutex</div><div class="ttdef"><b>Definition:</b> block_queue.h:108</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_abf4cc71f9dee21814b8bbbc7b636c9d4"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#abf4cc71f9dee21814b8bbbc7b636c9d4">cryptonote::block_queue::has_spans</a></div><div class="ttdeci">bool has_spans(const boost::uuids::uuid &amp;connection_id) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:462</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a71f2ca79d57c1d010c08823706ff5428"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a71f2ca79d57c1d010c08823706ff5428">cryptonote::block_queue::span::origin</a></div><div class="ttdeci">epee::net_utils::network_address origin</div><div class="ttdef"><b>Definition:</b> block_queue.h:61</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a38c802bb3954698f02506c9c66c37c92"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a38c802bb3954698f02506c9c66c37c92">cryptonote::block_queue::blocks</a></div><div class="ttdeci">block_map blocks</div><div class="ttdef"><b>Definition:</b> block_queue.h:107</div></div>
<div class="ttc" id="namespacetesting_1_1internal_html_aa1114d84589bd22f45d443527528cb35"><div class="ttname"><a href="../../d0/da7/namespacetesting_1_1internal.html#aa1114d84589bd22f45d443527528cb35">testing::internal::move</a></div><div class="ttdeci">const T &amp; move(const T &amp;t)</div><div class="ttdef"><b>Definition:</b> gtest-port.h:1317</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a8963c71af31387d0e771c3aba25c4c0f"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a8963c71af31387d0e771c3aba25c4c0f">cryptonote::block_queue::span::span</a></div><div class="ttdeci">span(uint64_t start_block_height, std::vector&lt; cryptonote::block_complete_entry &gt; blocks, const boost::uuids::uuid &amp;connection_id, const epee::net_utils::network_address &amp;addr, float rate, size_t size)</div><div class="ttdef"><b>Definition:</b> block_queue.h:63</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ae5605cff9cc355ceec6950529dad7295"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ae5605cff9cc355ceec6950529dad7295">cryptonote::block_queue::get_max_block_height</a></div><div class="ttdeci">uint64_t get_max_block_height() const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:147</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a0447eed96065df5c20644ef9b4ef5cdd"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a0447eed96065df5c20644ef9b4ef5cdd">cryptonote::block_queue::erase_block</a></div><div class="ttdeci">void erase_block(block_map::iterator j)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:93</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a6661f09dc74635ca90ad7ad7257159a4"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a6661f09dc74635ca90ad7ad7257159a4">cryptonote::block_queue::get_next_span</a></div><div class="ttdeci">bool get_next_span(uint64_t &amp;height, std::vector&lt; cryptonote::block_complete_entry &gt; &amp;bcel, boost::uuids::uuid &amp;connection_id, epee::net_utils::network_address &amp;addr, bool filled=true) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:357</div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a263194b86cfffeaf12e13624d672ba32"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a263194b86cfffeaf12e13624d672ba32">cryptonote::block_queue::span::connection_id</a></div><div class="ttdeci">boost::uuids::uuid connection_id</div><div class="ttdef"><b>Definition:</b> block_queue.h:56</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a9e0f22eba6321d273b52a4c06030e91d"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a9e0f22eba6321d273b52a4c06030e91d">cryptonote::block_queue::get_last_known_hash</a></div><div class="ttdeci">crypto::hash get_last_known_hash(const boost::uuids::uuid &amp;connection_id) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:443</div></div>
<div class="ttc" id="namespacecrypto_html_adadec1379c607896bfcf795e65fe2d91"><div class="ttname"><a href="../../de/d36/namespacecrypto.html#adadec1379c607896bfcf795e65fe2d91">crypto::hash</a></div><div class="ttdeci">POD_CLASS hash</div><div class="ttdef"><b>Definition:</b> hash.h:48</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ac6e92aedb9bf2acf679a98b1d0650956"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ac6e92aedb9bf2acf679a98b1d0650956">cryptonote::block_queue::has_next_span</a></div><div class="ttdeci">bool has_next_span(const boost::uuids::uuid &amp;connection_id, bool &amp;filled, boost::posix_time::ptime &amp;time) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:377</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a2f7c702f852401a01a4bbdfd4969f12c"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a2f7c702f852401a01a4bbdfd4969f12c">cryptonote::block_queue::requested</a></div><div class="ttdeci">bool requested(const crypto::hash &amp;hash) const</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:219</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_a78b7b9ea0f6494a4799d3e73ed5ff66b"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#a78b7b9ea0f6494a4799d3e73ed5ff66b">cryptonote::block_queue::set_span_hashes</a></div><div class="ttdeci">void set_span_hashes(uint64_t start_height, const boost::uuids::uuid &amp;connection_id, std::vector&lt; crypto::hash &gt; hashes)</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:339</div></div>
<div class="ttc" id="net__utils__base_8h_html"><div class="ttname"><a href="../../de/de6/net__utils__base_8h.html">net_utils_base.h</a></div></div>
<div class="ttc" id="structcryptonote_1_1block__queue_1_1span_html_a32b7e86462262089ab1e08e87806e45a"><div class="ttname"><a href="../../df/d38/structcryptonote_1_1block__queue_1_1span.html#a32b7e86462262089ab1e08e87806e45a">cryptonote::block_queue::span::blocks</a></div><div class="ttdeci">std::vector&lt; cryptonote::block_complete_entry &gt; blocks</div><div class="ttdef"><b>Definition:</b> block_queue.h:55</div></div>
<div class="ttc" id="classcryptonote_1_1block__queue_html_ab69862fe5805316070a5f15caacbfe5d"><div class="ttname"><a href="../../d0/d7f/classcryptonote_1_1block__queue.html#ab69862fe5805316070a5f15caacbfe5d">cryptonote::block_queue::reserve_span</a></div><div class="ttdeci">std::pair&lt; uint64_t, uint64_t &gt; reserve_span(uint64_t first_block_height, uint64_t last_block_height, uint64_t max_blocks, const boost::uuids::uuid &amp;connection_id, const epee::net_utils::network_address &amp;addr, bool sync_pruned_blocks, uint32_t local_pruning_seed, uint32_t pruning_seed, uint64_t blockchain_height, const std::vector&lt; std::pair&lt; crypto::hash, uint64_t &gt;&gt; &amp;block_hashes, boost::posix_time::ptime time=boost::posix_time::microsec_clock::universal_time())</div><div class="ttdef"><b>Definition:</b> block_queue.cpp:231</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Sep 2 2023 19:23:28 for Monero by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
